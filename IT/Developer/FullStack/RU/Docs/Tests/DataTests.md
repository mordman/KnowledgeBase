### **Тестирование данных: подробный разбор**

**Тестирование данных** — это процесс проверки корректности, целостности, согласованности и качества данных в системе. Оно включает в себя проверку структуры данных, их хранения, обработки, миграции и защиты. Тестирование данных особенно важно для систем, работающих с большими объемами информации (например, базы данных, хранилища данных, ETL-процессы).

---

## **Цели тестирования данных**
1. **Проверка корректности данных** — убедиться, что данные соответствуют ожидаемым значениям.
2. **Проверка целостности данных** — убедиться, что данные не повреждены и не потеряны.
3. **Проверка согласованности данных** — убедиться, что данные синхронизированы между разными системами.
4. **Проверка производительности** — убедиться, что операции с данными выполняются быстро и эффективно.
5. **Проверка безопасности данных** — убедиться, что данные защищены от несанкционированного доступа.

---

## **Виды тестирования данных**

### **1. Тестирование баз данных (Database Testing)**
Проверка структуры базы данных, корректности запросов, триггеров, хранимых процедур и индексов.

#### **Примеры:**
- Проверка корректности схемы базы данных.
- Проверка выполнения SQL-запросов.
- Проверка работы триггеров и хранимых процедур.

---

### **2. Тестирование миграции данных (Data Migration Testing)**
Проверка корректности переноса данных из одной системы в другую.

#### **Примеры:**
- Проверка полноты миграции данных.
- Проверка корректности преобразования данных.
- Проверка отсутствия потерь данных.

---

### **3. Тестирование ETL-процессов (ETL Testing)**
Проверка процессов извлечения (Extract), преобразования (Transform) и загрузки (Load) данных.

#### **Примеры:**
- Проверка корректности извлечения данных из источника.
- Проверка корректности преобразования данных.
- Проверка корректности загрузки данных в целевую систему.

---

### **4. Тестирование качества данных (Data Quality Testing)**
Проверка данных на соответствие бизнес-правилам, отсутствие дубликатов, корректность форматов.

#### **Примеры:**
- Проверка отсутствия пустых значений в обязательных полях.
- Проверка корректности форматов данных (например, даты, email).
- Проверка отсутствия дубликатов.

---

### **5. Тестирование безопасности данных (Data Security Testing)**
Проверка защиты данных от несанкционированного доступа.

#### **Примеры:**
- Проверка шифрования данных.
- Проверка разграничения доступа к данным.
- Проверка аудита изменений данных.

---

## **Примеры тест-кейсов для тестирования данных**

---

### **1. Тест-кейс для проверки корректности структуры базы данных**

| Поле                | Значение                                                                 |
|---------------------|--------------------------------------------------------------------------|
| **ID**              | TC-DB-001                                                                |
| **Название**        | Проверка наличия таблицы `Users` и её столбцов.                         |
| **Предусловия**     | База данных развернута, доступ к СУБД.                                  |
| **Шаги**            | 1. Подключиться к базе данных. <br> 2. Выполнить запрос: `SHOW TABLES LIKE 'Users'`. <br> 3. Выполнить запрос: `DESCRIBE Users`. |
| **Ожидаемый результат** | Таблица `Users` существует. Столбцы: `id`, `name`, `email`, `created_at`. |
| **Фактический результат** | (Заполняется после выполнения теста).                                   |
| **Статус**          | (Пройден/Не пройден).                                                    |

---

### **2. Тест-кейс для проверки корректности SQL-запроса**

| Поле                | Значение                                                                 |
|---------------------|--------------------------------------------------------------------------|
| **ID**              | TC-DB-002                                                                |
| **Название**        | Проверка корректности запроса на выборку пользователей.                |
| **Предусловия**     | База данных развернута, таблица `Users` содержит тестовые данные.       |
| **Шаги**            | 1. Выполнить запрос: `SELECT * FROM Users WHERE id = 1`. <br> 2. Проверить результат. |
| **Ожидаемый результат** | Запрос возвращает одну запись с `id = 1`, `name = "John"`, `email = "john@example.com"`. |
| **Фактический результат** | (Заполняется после выполнения теста).                                   |
| **Статус**          | (Пройден/Не пройден).                                                    |

---

### **3. Тест-кейс для проверки миграции данных**

| Поле                | Значение                                                                 |
|---------------------|--------------------------------------------------------------------------|
| **ID**              | TC-DM-001                                                                |
| **Название**        | Проверка полноты миграции данных из старой системы в новую.             |
| **Предусловия**     | Старая и новая системы развернуты, доступ к обеим базам данных.         |
| **Шаги**            | 1. Сравнить количество записей в таблице `Users` в старой и новой базе. <br> 2. Проверить корректность переноса данных (например, `id`, `name`, `email`). |
| **Ожидаемый результат** | Количество записей совпадает. Данные в новой базе соответствуют данным в старой базе. |
| **Фактический результат** | (Заполняется после выполнения теста).                                   |
| **Статус**          | (Пройден/Не пройден).                                                    |

---

### **4. Тест-кейс для проверки ETL-процесса**

| Поле                | Значение                                                                 |
|---------------------|--------------------------------------------------------------------------|
| **ID**              | TC-ETL-001                                                               |
| **Название**        | Проверка корректности преобразования данных в ETL-процессе.             |
| **Предусловия**     | ETL-процесс настроен, доступ к источнику и целевой базе данных.           |
| **Шаги**            | 1. Запустить ETL-процесс. <br> 2. Сравнить данные в источнике и целевой базе. |
| **Ожидаемый результат** | Данные в целевой базе соответствуют преобразованным данным из источника. |
| **Фактический результат** | (Заполняется после выполнения теста).                                   |
| **Статус**          | (Пройден/Не пройден).                                                    |

---

### **5. Тест-кейс для проверки качества данных**

| Поле                | Значение                                                                 |
|---------------------|--------------------------------------------------------------------------|
| **ID**              | TC-DQ-001                                                                |
| **Название**        | Проверка отсутствия пустых значений в обязательных полях таблицы `Users`.|
| **Предусловия**     | База данных развернута, таблица `Users` содержит данные.                |
| **Шаги**            | 1. Выполнить запрос: `SELECT * FROM Users WHERE name IS NULL OR email IS NULL`. <br> 2. Проверить результат. |
| **Ожидаемый результат** | Запрос не возвращает записей (пустых значений нет).                       |
| **Фактический результат** | (Заполняется после выполнения теста).                                   |
| **Статус**          | (Пройден/Не пройден).                                                    |

---

### **6. Тест-кейс для проверки безопасности данных**

| Поле                | Значение                                                                 |
|---------------------|--------------------------------------------------------------------------|
| **ID**              | TC-DS-001                                                                |
| **Название**        | Проверка шифрования данных в базе данных.                              |
| **Предусловия**     | База данных развернута, доступ к конфигурации СУБД.                     |
| **Шаги**            | 1. Проверить настройки шифрования в конфигурации СУБД. <br> 2. Попытаться прочитать данные без ключа шифрования. |
| **Ожидаемый результат** | Данные зашифрованы, без ключа невозможно прочитать информацию.         |
| **Фактический результат** | (Заполняется после выполнения теста).                                   |
| **Статус**          | (Пройден/Не пройден).                                                    |

---

### **7. Тест-кейс для проверки разграничения доступа к данным**

| Поле                | Значение                                                                 |
|---------------------|--------------------------------------------------------------------------|
| **ID**              | TC-DS-002                                                                |
| **Название**        | Проверка ограничения доступа к таблице `Users` для роли `Guest`.        |
| **Предусловия**     | База данных развернута, настроены роли и права доступа.                 |
| **Шаги**            | 1. Подключиться к базе данных с ролью `Guest`. <br> 2. Попытаться выполнить запрос: `SELECT * FROM Users`. |
| **Ожидаемый результат** | Запрос отклоняется с ошибкой "Permission denied".                       |
| **Фактический результат** | (Заполняется после выполнения теста).                                   |
| **Статус**          | (Пройден/Не пройден).                                                    |

---

## **Инструменты для тестирования данных**
- **Для работы с базами данных:** SQL Developer, DBeaver, MySQL Workbench.
- **Для ETL-тестирования:** Informatica, Talend, Apache NiFi.
- **Для сравнения данных:** SQL Data Compare, DBUnit.
- **Для тестирования качества данных:** Great Expectations, Deequ.
- **Для тестирования безопасности:** SQLMap, Nessus.

---

## **Рекомендации по тестированию данных**
1. **Автоматизация:** Используйте скрипты и инструменты для автоматизации проверки данных (например, SQL-запросы, Python-скрипты).
2. **Регрессионное тестирование:** Проводите тестирование данных после каждого обновления системы.
3. **Тестирование на реальных данных:** Используйте реальные или близкие к реальным данные для проверки.
4. **Интеграция с CI/CD:** Включите тесты данных в процесс непрерывной интеграции.

---